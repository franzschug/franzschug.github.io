<!DOCTYPE html>

<style>
/*Legend specific*/
.legend {
  padding: 6px 8px;
  font: 14px Arial, Helvetica, sans-serif;
  background: white;
  background: rgba(255, 255, 255, 0.8);
  /*box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);*/
  /*border-radius: 5px;*/
  line-height: 24px;
  color: #555;
}
.legend h4 {
  text-align: center;
  font-size: 16px;
  margin: 2px 12px 8px;
  color: #777;
}

.legend span {
  position: relative;
  bottom: 3px;
}

.legend i {
  width: 18px;
  height: 18px;
  float: left;
  margin: 0 8px 0 0;
  opacity: 0.7;
}

.legend i.icon {
  background-size: 18px;
  background-color: rgba(255, 255, 255, 1);
}
</style>
<html lang="en">

<p><b>Ranking urban environments by street greenery - A comparison of Sentinel-2 and Google Street View for Green View Index assessment across 10 cities</b></p>
<p><i>Elisabeth Bauer & Lasse Harkort</i></p>
				
<span> Discover all ten cities:</span>
<button type="button" id="nextCity" onclick="nextTour()">Start Tour / Next City</button>		

<p id="city"></p>		

<div id="project1" class="hidden">

<p><span style="text-decoration: underline; color: #003366;"><strong>Introduction</strong></span></p>

<p><span style="font-weight: 400; color: #003366;">Urban vegetation is an important contributor to the quality of urban environments. It has a positive effect on biodiversity and air quality and provides recreation for citizens (Dobbs et al., 2014). There is a promising method presented on the website "<a style="color: #003366;" href="http://senseable.mit.edu/treepedia" target="_blank" rel="noopener">Treepedia</a>" [1] that derives the greenness of street networks in cities from Google Street View imagery data. The authors made the code available to the public but the required Google Street View data are no longer freely available. This is why this study examined an approach to approximate urban street greenness using fee-free Sentinel-2 satellite data and compared it to Treepedia results.

<p><span style="text-decoration: underline; color: #003366;"><strong>Research question</strong></span></p>

<p><span style="font-weight: 400; color: #003366;">Our results were compared to a ranking of 30 cities mapped by the Treepedia approach.</span></p>

<p><span style="font-weight: 400; color: #003366;">Our research questions were:</span></p>

<ol>

<li style="font-weight: 400;"><span style="font-weight: 400; color: #003366;">Is freely available Sentinel-2 Remote Sensing imagery a reasonable alternative to the Green View Index in mapping urban street greenery in multiple cities?</span></li>

<li style="font-weight: 400;"><span style="font-weight: 400; color: #003366;">How do Sentinel-2-derived results compare to existing Green View Index maps from ground-sampled imagery (Street View)?</span></li>

</ol>

<p><span style="text-decoration: underline; color: #003366;"><strong>Methodology</strong></span></p>

<p><span style="color: #003366;"><span style="font-weight: 400;">For acquiring the Sentinel 2 data, the R library Sen2r [2] was used. We quantified urban greenness using the Tasseled Cap Greenness (TCG) as a proxy (Sheng et al. 2011). 
Depending on the climate zone of the city we obtained satellite images in summer periods from 2018 to 2020. Usually multiple Satellite images could be obtained. From these, we took the images with the highest average TCG values to make sure that peak pheneology is compared instead of varying vegetation cover due to changing seasons. 
To calculate the area around streets we obtained the street networks by using the OSMnx package [3]. Depending on the street type we calculated a buffer of 15 meters additional to the estimated street width. The Sentinel image was then masked with the buffered street network. The final score of each city represents the average GVI value of the masked Sentinel image.
</span></span></p>

<p><span style="text-decoration: underline; color: #003366;"><strong>Results</strong></span></p>

<table style="border-color: Black; background-color: lightblue;" cellspacing="5"><caption>&nbsp;</caption>

<tbody>

<tr>

<td>

<p><span style="font-weight: 400; color: #003366;">City</span></p>

</td>

<td>

<p><span style="font-weight: 400; color: #003366;">Treepedia GVI</span></p>

</td>

<td>

<p><span style="font-weight: 400; color: #003366;">Our approach (avg TCG)</span></p>

</td>

</tr>

<tr>

<td>

<p><span style="font-weight: 400; color: #003366;">Paris</span></p>

</td>

<td>

<p><span style="font-weight: 400; color: #003366;">8.8</span></p>

</td>

<td>

<p><span style="font-weight: 400; color: #003366;">1.5</span></p>

</td>

</tr>

<tr>

<td>

<p><span style="font-weight: 400; color: #003366;">Turin</span></p>

</td>

<td>

<p><span style="font-weight: 400; color: #003366;">16.2</span></p>

</td>

<td>

<p><span style="font-weight: 400; color: #003366;">4.6</span></p>

</td>

</tr>

<tr>

<td>

<p><span style="font-weight: 400; color: #003366;">Tel Aviv</span></p>

</td>

<td>

<p><span style="font-weight: 400; color: #003366;">17.5</span></p>

</td>

<td>

<p><span style="font-weight: 400; color: #003366;">1.3</span></p>

</td>

</tr>

<tr>

<td>

<p><span style="font-weight: 400; color: #003366;">Amsterdam</span></p>

</td>

<td>

<p><span style="font-weight: 400; color: #003366;">20.6</span></p>

</td>

<td>

<p><span style="font-weight: 400; color: #003366;">5.2</span></p>

</td>

</tr>

<tr>

<td>

<p><span style="font-weight: 400; color: #003366;">Geneva</span></p>

</td>

<td>

<p><span style="font-weight: 400; color: #003366;">21.5</span></p>

</td>

<td>

<p><span style="font-weight: 400; color: #003366;">3.2</span></p>

</td>

</tr>

<tr>

<td>

<p><span style="font-weight: 400; color: #003366;">Frankfurt</span></p>

</td>

<td>

<p><span style="font-weight: 400; color: #003366;">21.5</span></p>

</td>

<td>

<p><span style="font-weight: 400; color: #003366;">6.6</span></p>

</td>

</tr>

<tr>

<td>

<p><span style="font-weight: 400; color: #003366;">Vancouver</span></p>

</td>

<td>

<p><span style="font-weight: 400; color: #003366;">25.9</span></p>

</td>

<td>

<p><span style="font-weight: 400; color: #003366;">7</span></p>

</td>

</tr>

<tr>

<td>

<p><span style="font-weight: 400; color: #003366;">Oslo</span></p>

</td>

<td>

<p><span style="font-weight: 400; color: #003366;">28.8</span></p>

</td>

<td>

<p><span style="font-weight: 400; color: #003366;">9.7</span></p>

</td>

</tr>

</tbody>

</table>

<p><span style="color: #003366;"><span style="font-weight: 400;"> Values from Treepedia and from our approach had a Pearson correlation of 0.88 (</span><em><span style="font-weight: 400;">p = &lt;0.01</span></em><span style="font-weight: 400;">)</span></span></p>

<p><span style="text-decoration: underline; color: #003366;"><strong>Conclusion</strong></span></p>

<p><span style="font-weight: 400; color: #003366;">Results of our approach show a strong correlation between A and B. Therefore, it can be presumed that Remote Sensing imagery represents a reasonable and fee-free alternative to the Green View Index in mapping urban street greenery. Yet to verify is the actual accuracy of the remote sensing approach. Therefore, ground truth data to validate the results against actual green fractions would be necessary.</span></p>


<p><span style="text-decoration: underline; color: #003366;"><strong>References</strong></span></p>

<p><span style="color: #003366;"><span style="font-weight: 400;">[1] X Li, C Zhang, W Li, R Ricard, Q Meng, W Zhang (2015).</span><a style="color: #003366;" href="http://senseable.mit.edu/treepedia/treepedia_publication.pdf"> <span style="font-weight: 400;">Assessing street-level urban greenery using Google Street View and a modified green view index.</span></a><span style="font-weight: 400;"> Urban Forestry &amp; Urban Greening 14 (3), 675-685</span></span></p>

<p><span style="color: #003366;"><span style="font-weight: 400;">[2] L. Ranghetti, M. Boschetti, F. Nutini, L. Busetto (2020). &ldquo;sen2r: An R toolbox for automatically downloading and preprocessing Sentinel-2 satellite data&rdquo;. Computers &amp; Geosciences, 139, 104473. DOI: 10.1016/j.cageo.2020.104473, URL: </span><a style="color: #003366;" href="http://sen2r.ranghetti.info"><span style="font-weight: 400;">http://sen2r.ranghetti.info</span></a><span style="font-weight: 400;">.&nbsp;</span></span></p>

<p><span style="font-weight: 400; color: #003366;">[3] Boeing, G. 2017. &ldquo;OSMnx: New Methods for Acquiring, Constructing, Analyzing, and Visualizing Complex Street Networks.&rdquo; Computers, Environment and Urban Systems. 65, 126-139. doi:10.1016/j.compenvurbsys.2017.05.004&nbsp;</span></p>
</div>

</html>

<script>

map.setView([0, 0], 2);
cityIterator = 0

function unloadContent() {
	map.removeLayer(tileCollection[cityIterator])
	map.removeControl(legend)
}

tiles01Ams = L.tileLayer('data/topic1/AMSTERDAM/{z}/{x}/{y}.png', {tms:true});
tiles01Bos = L.tileLayer('data/topic1/BOSTON/{z}/{x}/{y}.png', {tms:true});
tiles01Fra = L.tileLayer('data/topic1/FRANKFURT/{z}/{x}/{y}.png', {tms:true});
tiles01Gen = L.tileLayer('data/topic1/GENEVA/{z}/{x}/{y}.png', {tms:true});
tiles01Kob = L.tileLayer('data/topic1/KOBE/{z}/{x}/{y}.png', {tms:true});
tiles01Osl = L.tileLayer('data/topic1/OSLO/{z}/{x}/{y}.png', {tms:true});
tiles01Par = L.tileLayer('data/topic1/PARIS/{z}/{x}/{y}.png', {tms:true});
tiles01Tel = L.tileLayer('data/topic1/TEL_AVIV/{z}/{x}/{y}.png', {tms:true});
tiles01Tur = L.tileLayer('data/topic1/TURIN/{z}/{x}/{y}.png', {tms:true});
tiles01Van = L.tileLayer('data/topic1/VANCOUVER/{z}/{x}/{y}.png', {tms:true});

tileCollection  = [tiles01Ams, tiles01Bos, tiles01Fra, tiles01Gen, tiles01Kob, tiles01Osl, tiles01Par, tiles01Tel, tiles01Tur, tiles01Van]

names = ["Amsterdam", "Boston", "Frankfurt", "Geneva", "Kobe", "Oslo", "Paris", "Tel Aviv", "Turin", "Vancouver"]

/*Legend specific*/
var legend = L.control({ position: "bottomright" });
console.log("zz")
legend.onAdd = function(map) {	
  //console.log("t")
  var div = L.DomUtil.create("div", "legend");
  //div.style.width="30%";
  //div.innerHTML += "<h4>Legend (TCGreen)</h4>";  
  //div.innerHTML += '<img src="data/topic1/legend.png" alt="legend" width="100%">';
  //return div;
};

//legend.addTo(map);

function nextTour(id) {
	map.setView([yCoords[cityIterator], xCoords[cityIterator]], 13)
	
	if(cityIterator === 0)  {
		map.removeLayer(tileCollection[9])
	} else {
		map.removeLayer(tileCollection[cityIterator - 1])
	}
		
	tileCollection[cityIterator].addTo(map)
	tileCollection[cityIterator].bringToFront()
	
	document.getElementById("city").innerHTML = "This is " + names[cityIterator]
	if(cityIterator < 9) {
		cityIterator = cityIterator + 1
	} else {
		cityIterator = 0;
	}
}   
</script>